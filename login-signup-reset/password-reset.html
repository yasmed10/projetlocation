<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Réinitialiser le mot de passe | MeubleCuisine</title>
    <!-- Lien vers votre fichier CSS externe principal -->
    <link rel="stylesheet" href="css/style.css">
    <style>
        /* Styles SPÉCIFIQUES pour la page réinitialisation */
        .reset-password-wrapper {
            max-width: 480px;
            margin: 60px auto;
            padding: 30px 40px;
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
        }
        .reset-password-wrapper h1 {
            text-align: center;
            color: var(--primary-color);
            margin-bottom: 20px;
        }
         .reset-password-wrapper p {
            text-align: center;
            margin-bottom: 30px;
            color: #666;
            font-size: 0.95rem;
        }
        .reset-password-wrapper .form-group {
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <nav>
                <a href="index.html" class="logo">MeubleCuisine</a>
                <div class="nav-links">
                    <a href="index.html">Accueil</a>
                    <a href="collections.html">Collections</a>
                    <a href="a-propos.html">À propos</a>
                    <a href="contact.html">Contact</a>
                </div>
                <div class="auth-buttons">
                     <!-- Boutons Connexion/Inscription du header standard -->
                    <button class="btn btn-outline" id="login-btn-header">Connexion</button>
                    <button class="btn btn-primary" id="register-btn-header">Créer un compte</button>
                </div>
            </nav>
        </div>
    </header>

    <main>
        <div class="container">
            <div class="reset-password-wrapper">
                <h1>Réinitialiser votre mot de passe</h1>
                <p>Veuillez entrer et confirmer votre nouveau mot de passe ci-dessous.</p>

                <!-- ATTENTION: L'action doit pointer vers un script backend qui vérifie le token et met à jour le mdp -->
                <form id="reset-password-form" action="update_password.php" method="POST">

                    <!-- Champ caché pour envoyer le token récupéré de l'URL -->
                    <input type="hidden" id="reset-token" name="token" value="">

                    <div class="form-group">
                        <label for="new-password">Nouveau mot de passe</label>
                        <input type="password" id="new-password" name="password" class="form-control" required placeholder="Entrez votre nouveau mot de passe">
                    </div>

                     <div class="form-group">
                        <label for="confirm-password">Confirmer le nouveau mot de passe</label>
                        <input type="password" id="confirm-password" name="password_confirm" class="form-control" required placeholder="Confirmez votre nouveau mot de passe">
                    </div>

                    <div style="text-align: center; margin-top: 30px;">
                        <button type="submit" class="btn btn-primary" style="padding: 10px 30px; font-size: 1rem;">Réinitialiser le mot de passe</button>
                    </div>

                </form>

            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-column"> <h3>MeubleCuisine</h3> <p>Solutions sur mesure pour la cuisine de vos rêves. Qualité, design et fonctionnalité.</p> <div class="footer-social"></div> </div>
                <div class="footer-column"> <h3>Navigation</h3> <ul class="footer-links"> <li><a href="index.html">Accueil</a></li> <li><a href="collections.html">Collections</a></li> <li><a href="a-propos.html">À propos</a></li> <li><a href="contact.html">Contact</a></li> <li><a href="#">Blog / Conseils</a></li> </ul> </div>
                <div class="footer-column"> <h3>Informations</h3> <ul class="footer-links"> <li><a href="#">FAQ</a></li> <li><a href="#">Livraison & Installation</a></li> <li><a href="#">Politique de confidentialité</a></li> <li><a href="#">Conditions Générales de Vente</a></li> <li><a href="#">Notre Garantie</a></li> </ul> </div>
                <div class="footer-column"> <h3>Contactez-nous</h3> <p>Showroom: 123 Boulevard Anfa,<br>Casablanca, Maroc</p> <p>Email: contact@meublecuisine.ma<br>Téléphone: +212 5 00 00 00 00</p> <p>Lun - Sam : 9h00 - 19h00</p> </div>
            </div>
            <div class="footer-bottom"> © <span id="current-year"></span> MeubleCuisine. Tous droits réservés. </div>
        </div>
    </footer>

    <!-- Modals (pour les boutons du header) -->
    <div class="modal-overlay" id="login-modal"> <div class="modal"> <div class="modal-header"> <h3>Connexion</h3> <button class="modal-close" aria-label="Fermer">×</button> </div> <div class="modal-body"> <form id="login-form-modal"> <div class="form-group"> <label for="login-email-modal">Email</label> <input type="email" class="form-control" id="login-email-modal" required> </div> <div class="form-group"> <label for="login-password-modal">Mot de passe</label> <input type="password" class="form-control" id="login-password-modal" required> </div> <div class="form-check"> <input type="checkbox" id="login-remember-modal"> <label for="login-remember-modal">Se souvenir de moi</label> </div> <a href="#" style="display: block; margin-top: 10px; text-align: right; font-size: 0.9rem; color: var(--primary-color);">Mot de passe oublié ?</a> </form> </div> <div class="modal-footer"> <button type="button" class="btn btn-outline modal-close">Annuler</button> <button type="submit" form="login-form-modal" class="btn btn-primary">Se connecter</button> </div> </div> </div>
    <div class="modal-overlay" id="register-modal"> <div class="modal"> <div class="modal-header"> <h3>Créer un compte</h3> <button class="modal-close" aria-label="Fermer">×</button> </div> <div class="modal-body"> <form id="register-form-modal"> <div class="form-group"> <label for="register-name-modal">Nom complet</label> <input type="text" class="form-control" id="register-name-modal" required> </div> <div class="form-group"> <label for="register-email-modal">Email</label> <input type="email" class="form-control" id="register-email-modal" required> </div> <div class="form-group"> <label for="register-password-modal">Mot de passe</label> <input type="password" class="form-control" id="register-password-modal" required> </div> <div class="form-group"> <label for="register-password-confirm-modal">Confirmer</label> <input type="password" class="form-control" id="register-password-confirm-modal" required> </div> <div class="form-check"> <input type="checkbox" id="register-terms-modal-header" required> <label for="register-terms-modal-header">J'accepte les <a href="conditions.html" target="_blank" style="color: var(--primary-color);">CGU</a>.</label> </div> </form> </div> <div class="modal-footer"> <button type="button" class="btn btn-outline modal-close">Annuler</button> <button type="submit" form="register-form-modal" class="btn btn-primary">S'inscrire</button> </div> </div> </div>


    <!-- Script standard + spécifique -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- Modal Functionality ---
            const loginBtnHeader = document.getElementById('login-btn-header');
            const registerBtnHeader = document.getElementById('register-btn-header');
            const loginModal = document.getElementById('login-modal');
            const registerModal = document.getElementById('register-modal');
            const closeButtons = document.querySelectorAll('.modal-close');
            const modalOverlays = document.querySelectorAll('.modal-overlay');
            function openModal(modal) { if (modal) modal.classList.add('active'); document.body.style.overflow = 'hidden'; }
            function closeModal(modal) { if (modal) modal.classList.remove('active'); if (!document.querySelector('.modal-overlay.active')) { document.body.style.overflow = ''; } }
            loginBtnHeader?.addEventListener('click', (e) => { e.preventDefault(); openModal(loginModal); });
            registerBtnHeader?.addEventListener('click', (e) => { e.preventDefault(); openModal(registerModal); });
            closeButtons.forEach(button => { button.addEventListener('click', () => { closeModal(button.closest('.modal-overlay')); }); });
            modalOverlays.forEach(overlay => { overlay.addEventListener('click', (event) => { if (event.target === overlay) { closeModal(overlay); } }); });
            document.addEventListener('keydown', (event) => { if (event.key === 'Escape') { const activeModal = document.querySelector('.modal-overlay.active'); if (activeModal) { closeModal(activeModal); } } });

            // --- Footer Year ---
            const currentYearSpan = document.getElementById('current-year');
            if(currentYearSpan) { currentYearSpan.textContent = new Date().getFullYear(); }

            // --- Reset Password Page Specific JS ---
            const resetTokenInput = document.getElementById('reset-token');
            if (resetTokenInput) {
                // Récupérer le token depuis l'URL
                const urlParams = new URLSearchParams(window.location.search);
                const token = urlParams.get('token'); // Assurez-vous que le paramètre dans l'URL est bien 'token'
                if (token) {
                    resetTokenInput.value = token;
                } else {
                    // Optionnel: Afficher un message ou rediriger si le token est manquant
                    console.error("Token de réinitialisation manquant dans l'URL !");
                    // Rediriger vers la page d'accueil ou de login pourrait être une bonne idée ici
                    // window.location.href = 'login.html';
                }
            }

            // --- Optionnel: Validation de confirmation de mot de passe côté client ---
            const newPasswordInput = document.getElementById('new-password');
            const confirmPasswordInput = document.getElementById('confirm-password');
            const resetForm = document.getElementById('reset-password-form');
            if (newPasswordInput && confirmPasswordInput && resetForm) {
                resetForm.addEventListener('submit', function(event) {
                    if (newPasswordInput.value !== confirmPasswordInput.value) {
                        alert("Les nouveaux mots de passe ne correspondent pas !");
                        confirmPasswordInput.focus();
                        event.preventDefault(); // Empêche l'envoi du formulaire
                    }
                    // Ajouter ici d'autres validations si nécessaire (longueur, complexité...)
                });
            }
        });
    </script>
</body>
</html>